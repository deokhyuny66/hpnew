<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.freeze.mybatis.dao.CalcDAO">
	<select id="getCalcSetting" resultType="com.freeze.mybatis.vo.CalcSettingEntity">
		select * from SETTING_VIEW_T where returns_py = #{returns_py} and temper_type like '%'||#{temper_type}||'%'
	</select>	
	
	<select id="getCalcPrice" resultType="com.freeze.mybatis.vo.CalcPriceEntity">
		select * from tb_price
	</select>
	
	<select id="getCalcCDU" resultType="com.freeze.mybatis.vo.CalcCDUEntity">
		select * from cdu_t
	</select>	
	
	<select id="getOneCalcCDU" resultType="com.freeze.mybatis.vo.CalcCDUEntity">
		select * from cdu_t where pid = #{pid}
	</select>	
	
	<select id="getCalcBase" resultType="com.freeze.mybatis.vo.CalcBaseEntity">
		select * from PYNTYPE
	</select>	
	
	<update id="updateProductsAll" parameterType="com.freeze.mybatis.vo.CalcViewEntity">
		update SETTING_VIEW_T 
			set CDU = #{cdu}, 
				CDU_UNIT_PRICE = #{cdu_unit_price}
			where PINID = #{pntid}
	</update>
	
	<update id="updateCalcCDU" parameterType="com.freeze.mybatis.vo.CalcCDUEntity">
		update cdu_t set
			purchase_price = #{purchase_price}, 
			unit_price = #{unit_price}
		where pid = #{pid}
	</update>
</mapper>